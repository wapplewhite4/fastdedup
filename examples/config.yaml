# Example Pipeline Configuration (YAML)
# Dataset Deduplication Tool
#
# This configuration file defines a complete deduplication and filtering pipeline.
# Adjust the settings below to match your dataset requirements.

input:
  path: "raw_dataset.jsonl.gz"
  format: jsonl

output:
  path: "clean_dataset.jsonl"
  format: jsonl
  compression: none  # Options: none, gzip, zstd

# Deduplication settings
deduplication:
  # Exact deduplication using content hashing
  exact:
    field: "text"       # Field to use for hashing (null = full record)
    normalize: true     # Normalize text before hashing

  # Fuzzy deduplication using MinHash + LSH
  fuzzy:
    threshold: 0.85     # Similarity threshold (0.0-1.0)
    field: "text"       # Field to compare

# Quality filters
filters:
  # Language detection filter
  language:
    allowed_languages:
      - "eng"           # English
      - "code"          # Programming code
    confidence_threshold: 0.7
    min_text_length: 50

  # Quality metrics filter
  quality:
    min_length: 100
    max_length: 10000
    min_word_count: 20
    max_word_count: 2000
    max_repetition_ratio: 0.3
    min_unique_words_ratio: 0.3
    max_url_ratio: 0.1
    max_special_char_ratio: 0.3
    reject_html: true
    filter_profanity: false
    min_avg_word_length: 2.5
